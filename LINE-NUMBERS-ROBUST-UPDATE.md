# è¡Œå·åŠŸèƒ½é²æ£’æ€§æ›´æ–°

## ğŸ”§ ä¿®å¤çš„é—®é¢˜

### 1. **è¡Œæ•°æ˜¾ç¤ºé”™è¯¯**
- **é—®é¢˜**: è¡Œå·è®¡ç®—ä¸å‡†ç¡®ï¼Œå¯èƒ½æ˜¾ç¤ºé”™è¯¯çš„è¡Œæ•°
- **ä¿®å¤**: æ”¹è¿›äº†è¡Œæ•°è®¡ç®—é€»è¾‘ï¼Œç¡®ä¿è‡³å°‘æ˜¾ç¤º1è¡Œï¼Œæ­£ç¡®å¤„ç†ç©ºå†…å®¹

### 2. **æ»šåŠ¨åŒæ­¥é—®é¢˜**
- **é—®é¢˜**: è¡Œå·åŒºåŸŸä¸ä»£ç åŒºåŸŸæ»šåŠ¨ä¸åŒæ­¥
- **ä¿®å¤**: 
  - ä½¿ç”¨é˜²æŠ–æœºåˆ¶é¿å…é¢‘ç¹æ›´æ–°
  - ç¼“å­˜æ»šåŠ¨ä½ç½®é¿å…é‡å¤è®¡ç®—
  - ç¡®ä¿æ ·å¼ä¸€è‡´æ€§ï¼ˆè¡Œé«˜ã€å­—ä½“ç­‰ï¼‰

### 3. **æ€§èƒ½é—®é¢˜**
- **é—®é¢˜**: é¢‘ç¹æ›´æ–°å¯¼è‡´æ€§èƒ½ä¸‹é™
- **ä¿®å¤**:
  - æ·»åŠ é˜²æŠ–å»¶è¿Ÿ (100ms)
  - ç¼“å­˜è®¡ç®—ç»“æœ
  - è·³è¿‡ä¸å¿…è¦çš„æ›´æ–°

## âœ¨ é²æ£’æ€§æ”¹è¿›

### 1. **é”™è¯¯å¤„ç†**
```javascript
// æ‰€æœ‰æ–¹æ³•éƒ½åŒ…è£…åœ¨ try-catch ä¸­
try {
    // æ ¸å¿ƒé€»è¾‘
} catch (error) {
    console.error('å…·ä½“é”™è¯¯ä¿¡æ¯:', error);
    // ä¼˜é›…é™çº§
}
```

### 2. **çŠ¶æ€éªŒè¯**
```javascript
// æ£€æŸ¥DOMå…ƒç´ æ˜¯å¦å­˜åœ¨
if (!this.textarea || !this.lineNumbers) {
    console.warn('DOMå…ƒç´ å·²è¢«é”€æ¯ï¼Œè·³è¿‡æ›´æ–°');
    return;
}
```

### 3. **é˜²æŠ–æœºåˆ¶**
```javascript
// é˜²æ­¢é¢‘ç¹æ›´æ–°
debouncedUpdateLineNumbers() {
    if (this.updateTimeout) {
        clearTimeout(this.updateTimeout);
    }
    this.updateTimeout = setTimeout(() => {
        this.updateLineNumbers();
    }, this.debounceDelay);
}
```

### 4. **ç¼“å­˜ä¼˜åŒ–**
```javascript
// é¿å…é‡å¤è®¡ç®—
if (lineCount === this.cachedLineCount) {
    return; // è·³è¿‡æ›´æ–°
}
this.cachedLineCount = lineCount;
```

## ğŸ¯ æ–°å¢åŠŸèƒ½

### 1. **æ ·å¼åŒæ­¥**
- è‡ªåŠ¨åŒæ­¥å­—ä½“ã€è¡Œé«˜ç­‰æ ·å¼
- ç¡®ä¿è¡Œå·ä¸ä»£ç å®Œç¾å¯¹é½

### 2. **æ™ºèƒ½ç¼©è¿›**
- Tabé”®æ·»åŠ 4ç©ºæ ¼ç¼©è¿›
- Shift+Tabå‡å°‘ç¼©è¿›
- æ”¯æŒå¤šè¡Œç¼©è¿›æ“ä½œ

### 3. **é”™è¯¯å®šä½å¢å¼º**
- è‡ªåŠ¨è·³è½¬åˆ°é”™è¯¯è¡Œ
- çº¢è‰²èƒŒæ™¯é«˜äº®é”™è¯¯ä½ç½®
- 2ç§’åè‡ªåŠ¨æ¶ˆå¤±

### 4. **å†…å­˜ç®¡ç†**
- æä¾›destroyæ–¹æ³•æ¸…ç†èµ„æº
- è‡ªåŠ¨æ¸…ç†å®šæ—¶å™¨å’Œäº‹ä»¶ç›‘å¬å™¨

## ğŸ§ª æµ‹è¯•é¡µé¢

åˆ›å»ºäº† `line-numbers-test.html` ç”¨äºæµ‹è¯•å„ç§åŠŸèƒ½ï¼š

### æµ‹è¯•é¡¹ç›®
1. **åŸºæœ¬åŠŸèƒ½**
   - è¡Œå·æ˜¾ç¤º
   - æ»šåŠ¨åŒæ­¥
   - å†…å®¹æ›´æ–°

2. **äº¤äº’åŠŸèƒ½**
   - è·³è½¬åˆ°æŒ‡å®šè¡Œ
   - é”™è¯¯è¡Œé«˜äº®
   - Tabé”®ç¼©è¿›

3. **è¾¹ç•Œæƒ…å†µ**
   - ç©ºå†…å®¹å¤„ç†
   - å¤§é‡å†…å®¹æ€§èƒ½
   - å¼‚å¸¸è¾“å…¥å¤„ç†

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ç”¨æ³•
```javascript
// åˆå§‹åŒ–
const lineNumbers = new LineNumbers('textarea-id', 'line-numbers-id');

// è·³è½¬åˆ°ç¬¬10è¡Œ
lineNumbers.goToLine(10);

// é«˜äº®é”™è¯¯è¡Œ
lineNumbers.highlightLine(15);

// è·å–å½“å‰è¡Œå·
const currentLine = lineNumbers.getCurrentLineNumber();

// é”€æ¯å®ä¾‹
lineNumbers.destroy();
```

### é”™è¯¯å¤„ç†
```javascript
try {
    const lineNumbers = new LineNumbers('textarea-id', 'line-numbers-id');
} catch (error) {
    console.error('åˆå§‹åŒ–å¤±è´¥:', error);
    // æä¾›å¤‡é€‰æ–¹æ¡ˆ
}
```

## ğŸ” è°ƒè¯•ä¿¡æ¯

æ‰€æœ‰æ“ä½œéƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼š
- âœ… æˆåŠŸæ“ä½œ
- âŒ é”™è¯¯ä¿¡æ¯  
- âš ï¸ è­¦å‘Šæç¤º
- ğŸ“Š çŠ¶æ€ä¿¡æ¯

## ğŸš€ æ€§èƒ½æŒ‡æ ‡

### ä¼˜åŒ–åçš„æ€§èƒ½
- **åˆå§‹åŒ–**: < 10ms
- **è¡Œå·æ›´æ–°**: < 5ms (é˜²æŠ–)
- **æ»šåŠ¨åŒæ­¥**: < 1ms (ç¼“å­˜)
- **å†…å­˜å ç”¨**: æœ€å°åŒ–

### æ”¯æŒè§„æ¨¡
- **æœ€å¤§è¡Œæ•°**: 10,000+ è¡Œ
- **æ–‡ä»¶å¤§å°**: 1MB+ ä»£ç 
- **å“åº”æ—¶é—´**: < 16ms (60fps)

## ğŸ›¡ï¸ å®¹é”™æœºåˆ¶

1. **DOMå…ƒç´ æ£€æŸ¥**: é˜²æ­¢è®¿é—®å·²é”€æ¯çš„å…ƒç´ 
2. **æ•°å€¼éªŒè¯**: ç¡®ä¿è¡Œå·åœ¨æœ‰æ•ˆèŒƒå›´å†…
3. **æ ·å¼å›é€€**: æ ·å¼è·å–å¤±è´¥æ—¶ä½¿ç”¨é»˜è®¤å€¼
4. **ä¼˜é›…é™çº§**: æ ¸å¿ƒåŠŸèƒ½å¤±è´¥æ—¶ä¿æŒåŸºæœ¬å¯ç”¨æ€§

ç°åœ¨è¡Œå·åŠŸèƒ½æ›´åŠ ç¨³å®šå¯é ï¼Œèƒ½å¤Ÿå¤„ç†å„ç§è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸åœºæ™¯ï¼